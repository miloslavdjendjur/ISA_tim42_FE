<div class="modal-overlay" (click)="closeModal()"></div>
  <div class="modal-content">
  <div class="modal-image">
    <img [src]="post.imagePath" alt="Post Image" />
  </div>
  <div class="modal-details">
    <div class="modal-header" [routerLink]="['/profile', post.userId]">
      <img [src]="post.userProfileImage || 'assets/default.jpg'" class="user-profile" alt="User Profile" />
      <p class="username">{{ post.username }}</p>
      <p class="dot"> • </p>
      <p class="post-created"> {{ post.createdDate | date: 'short'}} </p>
    </div>
    <p class="post-description">{{ post.description }}</p>

    <div class="modal-comments">
      <div class="comment" *ngFor="let comment of post.comments">
        <img [src]="comment.profileImagePath" class="comment-profile" alt="Profile Image" [routerLink]="['/profile', comment.userId]"/>
        <div class="comment-details">
          <span class="comment-username" [routerLink]="['/profile', comment.userId]">{{ comment.username }}</span>
          <span class="comment-text">{{ comment.text }}</span>
          <span class="comment-time">{{ comment.createdTime | date: 'short' }}</span>
        </div>
      </div>
    </div>
    

    <!-- Move the error message here -->
    <div *ngIf="errorMessage" class="error-popup">
      <span>{{ errorMessage }}</span>
      <button class="close-button" (click)="clearError()">×</button>
    </div>
    

    <div class="modal-actions">
      <div class="post-actions">
        <button class="interaction-button" (click)="toggleLike(post.id)">
          <i class="fa fa-heart" [ngClass]="{'red': isPostLiked(post.id), 'regular': !isPostLiked(post.id)}" aria-hidden="true"></i>
        </button>        
        <button class="interaction-button" (click)="openCommentInput(commentInput)">
          <i class="fa fa-comment regular" aria-hidden="true"></i>
        </button>
      </div>
      <div class="likes-count">{{ post.likes }} likes</div>
      <div class="modal-add-comment">
        <textarea
        #commentInput
        placeholder="Add a comment..."
        class="comment-input"
        rows="1"
        (input)="adjustTextareaHeight(commentInput)"
        (keydown.enter)="submitComment(post.id, commentInput); $event.preventDefault()"
      ></textarea>
      </div>
    </div>    
  </div>
</div>
